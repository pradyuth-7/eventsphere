<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>EventSphere - Event Management Platform</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <script src="https://unpkg.com/lucide@latest/dist/umd/lucide.js"></script>
    <style>
        .gradient-text {
            background: linear-gradient(to right, #2563eb, #7c3aed, #ec4899);
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
            background-clip: text;
        }
        
        .gradient-bg {
            background: linear-gradient(135deg, #eff6ff 0%, #f3e8ff 50%, #fdf2f8 100%);
        }
        
        .modal {
            display: none;
            position: fixed;
            z-index: 1000;
            left: 0;
            top: 0;
            width: 100%;
            height: 100%;
            background-color: rgba(0,0,0,0.5);
        }
        
        .modal.show {
            display: flex;
            align-items: center;
            justify-content: center;
        }
        
        .category-badge {
            display: inline-block;
            padding: 0.25rem 0.75rem;
            border-radius: 9999px;
            font-size: 0.75rem;
            font-weight: 600;
            text-transform: uppercase;
        }
        
        .category-tech { background: linear-gradient(135deg, #3b82f6, #1d4ed8); color: white; }
        .category-cultural { background: linear-gradient(135deg, #10b981, #059669); color: white; }
        .category-sports { background: linear-gradient(135deg, #f59e0b, #d97706); color: white; }
        .category-academic { background: linear-gradient(135deg, #8b5cf6, #7c3aed); color: white; }
        .category-social { background: linear-gradient(135deg, #ec4899, #db2777); color: white; }
    </style>
</head>
<body class="min-h-screen gradient-bg">
    <!-- Header -->
    <header class="border-b bg-white/80 backdrop-blur-sm shadow-sm">
        <div class="container mx-auto px-4 py-4 flex items-center justify-between">
            <div class="flex items-center gap-2">
                <div class="w-8 h-8 bg-gradient-to-br from-blue-500 to-purple-600 rounded-lg flex items-center justify-center shadow-lg">
                    <i data-lucide="calendar" class="w-5 h-5 text-white"></i>
                </div>
                <h1 class="text-2xl font-bold gradient-text">EventSphere</h1>
            </div>

            <nav class="flex items-center gap-4" id="nav-menu">
                <!-- Navigation will be populated by JavaScript -->
            </nav>
        </div>
    </header>

    <!-- Hero Section -->
    <section class="py-20 px-4">
        <div class="container mx-auto text-center">
            <h2 class="text-4xl md:text-6xl font-bold gradient-text mb-6">
                Discover Amazing Events
            </h2>
            <p class="text-xl text-gray-600 mb-8 max-w-2xl mx-auto">
                Join thousands of students and organizers creating unforgettable experiences. From tech meetups to cultural festivals, find your next adventure.
            </p>

            <div class="flex flex-col sm:flex-row gap-4 justify-center" id="hero-buttons">
                <!-- Buttons will be populated by JavaScript -->
            </div>
        </div>
    </section>

    <!-- Features -->
    <section class="py-16 px-4 bg-white/60 backdrop-blur-sm">
        <div class="container mx-auto">
            <h3 class="text-3xl font-bold text-center mb-12 gradient-text">
                Why Choose EventSphere?
            </h3>

            <div class="grid md:grid-cols-3 gap-8">
                <div class="border-l-4 border-l-blue-500 hover:shadow-lg transition-all duration-300 hover:border-l-blue-600 bg-white/80 p-6 rounded-lg">
                    <i data-lucide="calendar" class="w-12 h-12 text-blue-500 mb-4"></i>
                    <h4 class="text-xl font-semibold text-gray-800 mb-2">Easy Event Management</h4>
                    <p class="text-gray-600">
                        Create and manage events with our intuitive dashboard. Set dates, descriptions, and track registrations effortlessly.
                    </p>
                </div>

                <div class="border-l-4 border-l-green-500 hover:shadow-lg transition-all duration-300 hover:border-l-green-600 bg-white/80 p-6 rounded-lg">
                    <i data-lucide="users" class="w-12 h-12 text-green-500 mb-4"></i>
                    <h4 class="text-xl font-semibold text-gray-800 mb-2">Seamless Registration</h4>
                    <p class="text-gray-600">
                        Students can discover and register for events with just a few clicks. Get instant confirmations and updates.
                    </p>
                </div>

                <div class="border-l-4 border-l-purple-500 hover:shadow-lg transition-all duration-300 hover:border-l-purple-600 bg-white/80 p-6 rounded-lg">
                    <i data-lucide="star" class="w-12 h-12 text-purple-500 mb-4"></i>
                    <h4 class="text-xl font-semibold text-gray-800 mb-2">Rich Categories</h4>
                    <p class="text-gray-600">
                        Browse events by categories like tech, cultural, sports, and more. Find exactly what interests you.
                    </p>
                </div>
            </div>
        </div>
    </section>

    <!-- Events Section -->
    <section class="py-16 px-4" id="events-section" style="display: none;">
        <div class="container mx-auto">
            <div class="flex items-center justify-between mb-12">
                <h3 class="text-3xl font-bold gradient-text">Upcoming Events</h3>
                <button class="px-4 py-2 border border-blue-300 text-blue-600 hover:bg-blue-50 rounded-lg transition-colors">
                    View All Events
                    <i data-lucide="arrow-right" class="ml-2 w-4 h-4 inline"></i>
                </button>
            </div>
            
            <!-- Search and Filter -->
            <div class="mb-8 flex flex-col sm:flex-row gap-4">
                <div class="flex-1">
                    <input 
                        type="text" 
                        id="search-input"
                        placeholder="Search events..." 
                        class="w-full px-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent"
                    >
                </div>
                <select id="category-filter" class="px-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent">
                    <option value="">All Categories</option>
                    <option value="tech">Tech</option>
                    <option value="cultural">Cultural</option>
                    <option value="sports">Sports</option>
                    <option value="academic">Academic</option>
                    <option value="social">Social</option>
                </select>
            </div>

            <div id="events-grid" class="grid md:grid-cols-2 lg:grid-cols-3 gap-6">
                <!-- Events will be populated by JavaScript -->
            </div>
        </div>
    </section>

    <!-- Auth Modal -->
    <div id="auth-modal" class="modal">
        <div class="bg-white rounded-lg p-8 max-w-md w-full mx-4">
            <div class="flex justify-between items-center mb-6">
                <h3 id="modal-title" class="text-2xl font-bold text-gray-800">Login</h3>
                <button id="close-modal" class="text-gray-500 hover:text-gray-700">
                    <i data-lucide="x" class="w-6 h-6"></i>
                </button>
            </div>

            <form id="auth-form">
                <div class="space-y-4">
                    <div id="name-field" style="display: none;">
                        <label class="block text-sm font-medium text-gray-700 mb-1">Name</label>
                        <input type="text" id="name-input" class="w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent">
                    </div>
                    
                    <div>
                        <label class="block text-sm font-medium text-gray-700 mb-1">Email</label>
                        <input type="email" id="email-input" required class="w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent">
                    </div>
                    
                    <div>
                        <label class="block text-sm font-medium text-gray-700 mb-1">Password</label>
                        <input type="password" id="password-input" required class="w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent">
                    </div>
                    
                    <div id="user-type-field" style="display: none;">
                        <label class="block text-sm font-medium text-gray-700 mb-1">I am a</label>
                        <select id="user-type-input" class="w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent">
                            <option value="student">Student</option>
                            <option value="organizer">Organizer</option>
                        </select>
                    </div>
                </div>

                <button type="submit" id="auth-submit" class="w-full mt-6 bg-blue-600 text-white py-2 px-4 rounded-lg hover:bg-blue-700 transition-colors">
                    Login
                </button>
            </form>

            <div class="mt-4 text-center">
                <button id="toggle-auth-mode" class="text-blue-600 hover:text-blue-700">
                    Don't have an account? Sign up
                </button>
            </div>
        </div>
    </div>

    <!-- Toast Notification -->
    <div id="toast" class="fixed top-4 right-4 bg-green-500 text-white px-6 py-3 rounded-lg shadow-lg transform translate-x-full transition-transform duration-300 z-50">
        <span id="toast-message"></span>
    </div>

    <script>
        // Initialize Lucide icons
        lucide.createIcons();

        // Global state
        let currentUser = null;
        let authMode = 'login';
        let events = [
            {
                id: 1,
                title: "Tech Innovation Summit 2024",
                description: "Join industry leaders for cutting-edge tech discussions and networking opportunities.",
                date: "2024-12-15",
                time: "09:00",
                location: "Tech Hub Auditorium",
                category: "tech",
                organizer: "Tech Society",
                registrations: 45,
                maxCapacity: 100
            },
            {
                id: 2,
                title: "Cultural Festival Celebration",
                description: "Experience diverse cultures through music, dance, and traditional cuisine.",
                date: "2024-12-20",
                time: "18:00",
                location: "Main Campus Grounds",
                category: "cultural",
                organizer: "Cultural Committee",
                registrations: 78,
                maxCapacity: 200
            },
            {
                id: 3,
                title: "Annual Sports Championship",
                description: "Compete in various sports and showcase your athletic talents.",
                date: "2024-12-25",
                time: "08:00",
                location: "Sports Complex",
                category: "sports",
                organizer: "Sports Club",
                registrations: 32,
                maxCapacity: 150
            },
            {
                id: 4,
                title: "Academic Research Symposium",
                description: "Present your research findings and learn from fellow academics.",
                date: "2024-12-18",
                time: "14:00",
                location: "Research Center",
                category: "academic",
                organizer: "Research Department",
                registrations: 25,
                maxCapacity: 80
            },
            {
                id: 5,
                title: "Social Networking Mixer",
                description: "Connect with peers and build lasting professional relationships.",
                date: "2024-12-22",
                time: "19:00",
                location: "Student Lounge",
                category: "social",
                organizer: "Student Council",
                registrations: 56,
                maxCapacity: 120
            }
        ];

        // Initialize app
        function init() {
            // Check for existing user session
            const savedUser = localStorage.getItem('eventsphere_user');
            if (savedUser) {
                currentUser = JSON.parse(savedUser);
            }
            
            updateUI();
            setupEventListeners();
        }

        // Update UI based on authentication state
        function updateUI() {
            const navMenu = document.getElementById('nav-menu');
            const heroButtons = document.getElementById('hero-buttons');
            const eventsSection = document.getElementById('events-section');

            if (currentUser) {
                // Authenticated user navigation
                navMenu.innerHTML = `
                    <div class="flex items-center gap-4">
                        <button class="px-3 py-2 text-sm text-blue-600 hover:bg-blue-100 rounded-lg transition-colors">
                            <i data-lucide="search" class="w-4 h-4 mr-2 inline"></i>
                            Browse Events
                        </button>
                        <button class="px-3 py-2 text-sm text-green-600 hover:bg-green-100 rounded-lg transition-colors">
                            <i data-lucide="user" class="w-4 h-4 mr-2 inline"></i>
                            Profile
                        </button>
                        ${currentUser.userType === 'organizer' ? `
                            <button class="px-3 py-2 text-sm text-purple-600 hover:bg-purple-100 rounded-lg transition-colors">
                                <i data-lucide="settings" class="w-4 h-4 mr-2 inline"></i>
                                Dashboard
                            </button>
                        ` : ''}
                        <span class="text-sm text-gray-600 hidden sm:block">Welcome, ${currentUser.name}</span>
                        <button id="logout-btn" class="px-3 py-2 text-sm border border-red-300 text-red-600 hover:bg-red-50 rounded-lg transition-colors">
                            Logout
                        </button>
                    </div>
                `;

                // Hero buttons for authenticated users
                heroButtons.innerHTML = `
                    <button class="text-lg px-8 py-3 bg-green-600 hover:bg-green-700 text-white rounded-lg shadow-lg transition-colors">
                        <i data-lucide="search" class="mr-2 w-5 h-5 inline"></i>
                        Browse All Events
                    </button>
                `;

                // Show events section
                eventsSection.style.display = 'block';
                renderEvents();
            } else {
                // Guest navigation
                navMenu.innerHTML = `
                    <div class="flex items-center gap-2">
                        <button id="login-btn" class="px-4 py-2 text-blue-600 hover:bg-blue-100 rounded-lg transition-colors">
                            Login
                        </button>
                        <button id="signup-btn" class="px-4 py-2 bg-blue-600 hover:bg-blue-700 text-white rounded-lg shadow-lg transition-colors">
                            Sign Up
                        </button>
                    </div>
                `;

                // Hero buttons for guests
                heroButtons.innerHTML = `
                    <button id="hero-signup-btn" class="text-lg px-8 py-3 bg-blue-600 hover:bg-blue-700 text-white rounded-lg shadow-lg transition-colors">
                        Get Started
                        <i data-lucide="arrow-right" class="ml-2 w-5 h-5 inline"></i>
                    </button>
                    <button id="hero-login-btn" class="text-lg px-8 py-3 border border-purple-300 text-purple-600 hover:bg-purple-50 rounded-lg transition-colors">
                        Login
                    </button>
                `;

                // Hide events section
                eventsSection.style.display = 'none';
            }

            // Re-initialize Lucide icons
            lucide.createIcons();
        }

        // Setup event listeners
        function setupEventListeners() {
            // Modal controls
            document.getElementById('close-modal').addEventListener('click', closeModal);
            document.getElementById('toggle-auth-mode').addEventListener('click', toggleAuthMode);
            document.getElementById('auth-form').addEventListener('submit', handleAuth);

            // Search and filter
            document.getElementById('search-input')?.addEventListener('input', filterEvents);
            document.getElementById('category-filter')?.addEventListener('change', filterEvents);

            // Dynamic button listeners (using event delegation)
            document.addEventListener('click', (e) => {
                if (e.target.id === 'login-btn' || e.target.id === 'hero-login-btn') {
                    openModal('login');
                } else if (e.target.id === 'signup-btn' || e.target.id === 'hero-signup-btn') {
                    openModal('signup');
                } else if (e.target.id === 'logout-btn') {
                    logout();
                } else if (e.target.classList.contains('register-btn')) {
                    toggleRegistration(parseInt(e.target.dataset.eventId));
                }
            });

            // Close modal when clicking outside
            document.getElementById('auth-modal').addEventListener('click', (e) => {
                if (e.target.id === 'auth-modal') {
                    closeModal();
                }
            });
        }

        // Modal functions
        function openModal(mode) {
            authMode = mode;
            const modal = document.getElementById('auth-modal');
            const title = document.getElementById('modal-title');
            const nameField = document.getElementById('name-field');
            const userTypeField = document.getElementById('user-type-field');
            const submitBtn = document.getElementById('auth-submit');
            const toggleBtn = document.getElementById('toggle-auth-mode');

            if (mode === 'signup') {
                title.textContent = 'Sign Up';
                nameField.style.display = 'block';
                userTypeField.style.display = 'block';
                submitBtn.textContent = 'Sign Up';
                toggleBtn.textContent = 'Already have an account? Login';
            } else {
                title.textContent = 'Login';
                nameField.style.display = 'none';
                userTypeField.style.display = 'none';
                submitBtn.textContent = 'Login';
                toggleBtn.textContent = "Don't have an account? Sign up";
            }

            modal.classList.add('show');
        }

        function closeModal() {
            document.getElementById('auth-modal').classList.remove('show');
            document.getElementById('auth-form').reset();
        }

        function toggleAuthMode() {
            authMode = authMode === 'login' ? 'signup' : 'login';
            openModal(authMode);
        }

        // Authentication functions
        function handleAuth(e) {
            e.preventDefault();
            
            const email = document.getElementById('email-input').value;
            const password = document.getElementById('password-input').value;
            const name = document.getElementById('name-input').value;
            const userType = document.getElementById('user-type-input').value;

            if (authMode === 'signup') {
                signup(email, password, name, userType);
            } else {
                login(email, password);
            }
        }

        function login(email, password) {
            const users = JSON.parse(localStorage.getItem('eventsphere_users') || '[]');
            const user = users.find(u => u.email === email && u.password === password);

            if (user) {
                const { password: _, ...userWithoutPassword } = user;
                currentUser = userWithoutPassword;
                localStorage.setItem('eventsphere_user', JSON.stringify(currentUser));
                closeModal();
                updateUI();
                showToast('Login successful!');
            } else {
                showToast('Invalid credentials', 'error');
            }
        }

        function signup(email, password, name, userType) {
            const users = JSON.parse(localStorage.getItem('eventsphere_users') || '[]');
            const existingUser = users.find(u => u.email === email);

            if (existingUser) {
                showToast('User already exists', 'error');
                return;
            }

            const newUser = {
                id: Date.now().toString(),
                email,
                password,
                name,
                userType
            };

            users.push(newUser);
            localStorage.setItem('eventsphere_users', JSON.stringify(users));

            const { password: _, ...userWithoutPassword } = newUser;
            currentUser = userWithoutPassword;
            localStorage.setItem('eventsphere_user', JSON.stringify(currentUser));
            
            closeModal();
            updateUI();
            showToast('Account created successfully!');
        }

        function logout() {
            currentUser = null;
            localStorage.removeItem('eventsphere_user');
            updateUI();
            showToast('Logged out successfully!');
        }

        // Event functions
        function renderEvents(filteredEvents = events) {
            const grid = document.getElementById('events-grid');
            const userRegistrations = JSON.parse(localStorage.getItem('user_registrations') || '{}');
            const currentUserRegistrations = userRegistrations[currentUser?.id] || [];

            grid.innerHTML = filteredEvents.map(event => {
                const isRegistered = currentUserRegistrations.includes(event.id);
                const isFull = event.registrations >= event.maxCapacity;
                
                return `
                    <div class="bg-white rounded-lg shadow-lg hover:shadow-xl transition-all duration-300 border-l-4 border-l-${getCategoryColor(event.category)}-500 overflow-hidden">
                        <div class="p-6">
                            <div class="flex justify-between items-start mb-3">
                                <span class="category-badge category-${event.category}">${event.category}</span>
                                <span class="text-sm text-gray-500">${formatDate(event.date)}</span>
                            </div>
                            
                            <h3 class="text-xl font-bold text-gray-800 mb-2">${event.title}</h3>
                            <p class="text-gray-600 mb-4 line-clamp-2">${event.description}</p>
                            
                            <div class="space-y-2 mb-4">
                                <div class="flex items-center text-sm text-gray-500">
                                    <i data-lucide="clock" class="w-4 h-4 mr-2"></i>
                                    ${event.time}
                                </div>
                                <div class="flex items-center text-sm text-gray-500">
                                    <i data-lucide="map-pin" class="w-4 h-4 mr-2"></i>
                                    ${event.location}
                                </div>
                                <div class="flex items-center text-sm text-gray-500">
                                    <i data-lucide="user" class="w-4 h-4 mr-2"></i>
                                    ${event.organizer}
                                </div>
                            </div>
                            
                            <div class="flex items-center justify-between">
                                <span class="text-sm text-gray-500">
                                    ${event.registrations}/${event.maxCapacity} registered
                                </span>
                                
                                ${currentUser ? `
                                    <button 
                                        class="register-btn px-4 py-2 rounded-lg transition-colors ${
                                            isRegistered 
                                                ? 'bg-red-100 text-red-600 hover:bg-red-200' 
                                                : isFull 
                                                    ? 'bg-gray-100 text-gray-400 cursor-not-allowed'
                                                    : 'bg-blue-600 text-white hover:bg-blue-700'
                                        }"
                                        data-event-id="${event.id}"
                                        ${isFull && !isRegistered ? 'disabled' : ''}
                                    >
                                        ${isRegistered ? 'Unregister' : isFull ? 'Full' : 'Register'}
                                    </button>
                                ` : `
                                    <button class="px-4 py-2 bg-gray-100 text-gray-500 rounded-lg cursor-not-allowed" disabled>
                                        Login to Register
                                    </button>
                                `}
                            </div>
                        </div>
                    </div>
                `;
            }).join('');

            // Re-initialize Lucide icons
            lucide.createIcons();
        }

        function filterEvents() {
            const searchTerm = document.getElementById('search-input').value.toLowerCase();
            const categoryFilter = document.getElementById('category-filter').value;

            const filtered = events.filter(event => {
                const matchesSearch = event.title.toLowerCase().includes(searchTerm) ||
                                    event.description.toLowerCase().includes(searchTerm) ||
                                    event.location.toLowerCase().includes(searchTerm) ||
                                    event.organizer.toLowerCase().includes(searchTerm);
                
                const matchesCategory = !categoryFilter || event.category === categoryFilter;
                
                return matchesSearch && matchesCategory;
            });

            renderEvents(filtered);
        }

        function toggleRegistration(eventId) {
            if (!currentUser) return;

            const userRegistrations = JSON.parse(localStorage.getItem('user_registrations') || '{}');
            const currentUserRegistrations = userRegistrations[currentUser.id] || [];
            const event = events.find(e => e.id === eventId);

            if (currentUserRegistrations.includes(eventId)) {
                // Unregister
                userRegistrations[currentUser.id] = currentUserRegistrations.filter(id => id !== eventId);
                event.registrations--;
                showToast('Successfully unregistered from event!');
            } else {
                // Register
                if (event.registrations >= event.maxCapacity) {
                    showToast('Event is full!', 'error');
                    return;
                }
                
                if (!userRegistrations[currentUser.id]) {
                    userRegistrations[currentUser.id] = [];
                }
                userRegistrations[currentUser.id].push(eventId);
                event.registrations++;
                showToast('Successfully registered for event!');
            }

            localStorage.setItem('user_registrations', JSON.stringify(userRegistrations));
            renderEvents();
        }

        // Utility functions
        function getCategoryColor(category) {
            const colors = {
                tech: 'blue',
                cultural: 'green',
                sports: 'orange',
                academic: 'purple',
                social: 'pink'
            };
            return colors[category] || 'gray';
        }

        function formatDate(dateString) {
            const date = new Date(dateString);
            return date.toLocaleDateString('en-US', { 
                weekday: 'short', 
                year: 'numeric', 
                month: 'short', 
                day: 'numeric' 
            });
        }

        function showToast(message, type = 'success') {
            const toast = document.getElementById('toast');
            const toastMessage = document.getElementById('toast-message');
            
            toastMessage.textContent = message;
            toast.className = `fixed top-4 right-4 px-6 py-3 rounded-lg shadow-lg transition-transform duration-300 z-50 ${
                type === 'error' ? 'bg-red-500' : 'bg-green-500'
            } text-white`;
            
            // Show toast
            toast.style.transform = 'translateX(0)';
            
            // Hide after 3 seconds
            setTimeout(() => {
                toast.style.transform = 'translateX(100%)';
            }, 3000);
        }

        // Initialize the app when DOM is loaded
        document.addEventListener('DOMContentLoaded', init);
    </script>
</body>
</html>
